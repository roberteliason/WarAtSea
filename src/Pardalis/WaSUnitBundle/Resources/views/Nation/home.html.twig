{% extends 'PardalisWaSUnitBundle::base.html.twig' %}

{% block body %}
    <header class="row">
        <div class="col-lg-12 listheader">
            <img src="img/headers/list_header.jpg" alt="">
        </div>
    </header>

    <div class="row" id="alliances">
    {% for alliance in alliances %}
    <div class="col-lg-4 col-sm-6">
        <div class="list" alliance="{{ alliance.name }}">
            <h2>{{ alliance.name }}</h2>
            {% if alliance.nations is defined %}
                <ul>
                    {% for nation in alliance.nations %}
                    <li class="nation">
                        <header>
                            <i nation="{{ nation.name }}"></i>
                            <h3 class="nationname">{{ nation.name }}</h3>
                        </header>

                        {% if nation.units|length > 0 %}
                            <div class="listbody">

                            {% set prev_unittype = '' %}

                            {% for unit in nation.units %}
                                {% if unit.unittype.name is defined and unit.unittype.name != prev_unittype %}
                                    {% if prev_unittype != '' %}
                                        </ul>
                                        </div>
                                    {% endif %}
                                    <div class="unittype">
                                    <h4 class="unittypename">{{ unit.unittype.name }}</h4>
                                    <ul class="units">
                                    {% set prev_unittype = unit.unittype.name %}
                                {% endif %}
                                <li class="unit">
                                    <span class="unitname"><a href="{{ path('pardalis_was_unit_view', {'id': unit.id}) }}">{{ unit.name }}</a></span>
                                    <span class="unitcost">{{ unit.cost }}</span>
                                    <span class="unitset"><i set="{{ unit.releaseset.name }}"></i></span>
                                    <span class="unitrarity"><i rarity="{{ unit.rarity.name }}"></i></span>
                                </li>
                                {% if unit.unittype.name is defined and unit.unittype.name != prev_unittype %}
                                    </ul>
                                </div>
                            {% endif %}
                            {% endfor %}
                            </ul><!-- end unittypes -->
                            </div>
                        {% endif %}
                        <footer>

                        </footer>
                        </li>
                    {% endfor %} <!-- nations -->
                </ul>
            {% endif %}
        </div>
    </div>
    {% endfor %} <!-- alliances -->
    </div>
{% endblock %}